apiVersion: secrets-store.csi.x-k8s.io/v1
kind: SecretProviderClass
metadata:
  name: supabase-secrets-dashboard
  namespace: supabase
spec:
  provider: aws
  parameters:
    region: us-east-1
    objects: |
      # NEW: Dashboard credentials
      - objectName: "supabase-dashboard-credentials"
        objectType: "secretsmanager"
        jmesPath:
          - path: username
            objectAlias: dashboard_username
          - path: password
            objectAlias: dashboard_password
          - path: openAiApiKey
            objectAlias: dashboard_openai_key
  
  secretObjects:
    # NEW: Dashboard secret from AWS
    - secretName: supabase-dashboard-aws
      type: Opaque
      data:
        - objectName: dashboard_username
          key: username
        - objectName: dashboard_password
          key: password
        - objectName: dashboard_openai_key
          key: openAiApiKey